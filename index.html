<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Recomendaciones Inteligente</title>

    <!-- Google Fonts: Poppins y Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome para √≠conos -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        /* Fondo de imagen elegante */
        body {
            background-image: url('https://images.unsplash.com/photo-1507035895480-2b3156c31fc8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            font-family: 'Open Sans', sans-serif;
            color: #333;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* Overlay oscuro para mejorar legibilidad */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Oscurece el fondo */
            z-index: -1;
        }

        /* Contenedor principal con fondo transl√∫cido */
        .main-container {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin: 30px auto;
        }

        /* T√≠tulos */
        h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: #1a3a5f;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        h5 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #2c5282;
        }

        /* Bot√≥n principal */
        .btn-primary {
            background: linear-gradient(135deg, #28a745, #218838);
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        /* Inputs */
        .form-control {
            border-radius: 8px;
            border: 1px solid #ced4da;
            text-align: center;
            font-weight: 500;
        }

        .form-control:focus {
            border-color: #28a745;
            box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
        }

        /* Tabla */
        .table th {
            background-color: #1a3a5f;
            color: white;
            font-weight: 600;
        }

        .table td, .table th {
            vertical-align: middle;
        }

        /* Recomendaciones */
        .recomendacion-item {
            background: #f0f9f0;
            border-left: 5px solid #28a745;
            padding: 12px 16px;
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .badge {
            font-size: 0.9em;
            padding: 6px 12px;
            font-weight: 600;
        }

        /* Gu√≠a de puntuaciones */
        .table-light th, .table-light td {
            background-color: #f8f9fa;
        }

        /* Footer */
        footer {
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            font-size: 0.9rem;
            margin-top: 30px;
        }

        /* Animaci√≥n de entrada */
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-9">
            <div class="main-container fade-in">
                <div class="text-center mb-4">
                    <i class="fas fa-magic fa-2x text-success mb-2"></i>
                    <h2>Sistema de Recomendaciones</h2>
                    <p class="text-muted">Basado en similitud de coseno ‚Äî Recomendaciones para ambos usuarios</p>
                </div>

                <!-- Gu√≠a de puntuaciones -->
                <div class="mb-4">
                    <h5><i class="fas fa-info-circle"></i> Gu√≠a de Puntuaciones</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered text-center">
                            <thead class="table-light">
                                <tr>
                                    <th>Puntuaci√≥n</th>
                                    <th>Significado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>No me gusta / No lo usar√≠a</td></tr>
                                <tr><td>1-2</td><td>Bajo inter√©s</td></tr>
                                <tr><td>3</td><td>Inter√©s moderado</td></tr>
                                <tr><td>4</td><td>Me gusta mucho</td></tr>
                                <tr><td>5</td><td>¬°Me encanta! / Totalmente recomendado</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tabla de productos -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead class="table-dark">
                            <tr>
                                <th>Producto</th>
                                <th class="text-center">üë§ Usuario 1</th>
                                <th class="text-center">üë§ Usuario 2</th>
                            </tr>
                        </thead>
                        <tbody id="tablaProductos"></tbody>
                    </table>
                </div>

                <!-- Bot√≥n calcular -->
                <div class="text-center mt-4">
                    <button id="btnCalcular" class="btn btn-primary btn-lg px-5 shadow">
                        <i class="fas fa-calculator"></i> Calcular Similitud y Recomendaciones
                    </button>
                </div>

                <!-- Resultados -->
                <div id="resultado" class="mt-5"></div>
            </div>

            <!-- Footer -->
            <footer class="text-center mt-5">
                &copy; <span id="year"></span> - Sistema de Recomendaciones con IA b√°sica y dise√±o moderno
            </footer>
        </div>
    </div>
</div>

<script>
    // A√±o actual en el footer
    document.getElementById("year").textContent = new Date().getFullYear();

    // Productos
    const productos = ["Camiseta", "Pantal√≥n", "Zapatos", "Gorra", "Reloj"];

    // Generar filas de la tabla
    const tabla = document.getElementById("tablaProductos");
    productos.forEach((producto, i) => {
        const fila = document.createElement("tr");
        fila.innerHTML = `
            <td class="fw-bold text-start">${producto}</td>
            <td class="text-center"><input type="number" class="form-control usuario1" min="0" max="5" value="0"></td>
            <td class="text-center"><input type="number" class="form-control usuario2" min="0" max="5" value="0"></td>
        `;
        tabla.appendChild(fila);
    });

    // Similitud de coseno
    function similitudCoseno(vec1, vec2) {
        let productoEscalar = 0, magnitud1 = 0, magnitud2 = 0;
        for (let i = 0; i < vec1.length; i++) {
            productoEscalar += vec1[i] * vec2[i];
            magnitud1 += vec1[i] ** 2;
            magnitud2 += vec2[i] ** 2;
        }
        magnitud1 = Math.sqrt(magnitud1);
        magnitud2 = Math.sqrt(magnitud2);
        return (magnitud1 === 0 || magnitud2 === 0) ? 0 : productoEscalar / (magnitud1 * magnitud2);
    }

    // Evento del bot√≥n
    document.getElementById("btnCalcular").addEventListener("click", () => {
        const usuario1 = Array.from(document.querySelectorAll(".usuario1")).map(i => parseInt(i.value) || 0);
        const usuario2 = Array.from(document.querySelectorAll(".usuario2")).map(i => parseInt(i.value) || 0);

        // Validaci√≥n
        if ([...usuario1, ...usuario2].some(p => p < 0 || p > 5)) {
            alert("‚ùå Las puntuaciones deben estar entre 0 y 5.");
            return;
        }

        // Calcular similitud
        const sim = similitudCoseno(usuario1, usuario2);
        const porcentaje = (sim * 100).toFixed(2);

        let html = `
            <div class="alert alert-success text-center fade-in" style="font-size: 1.1rem;">
                <i class="fas fa-sync-alt fa-spin me-2"></i>
                <strong>Similitud calculada:</strong> ${porcentaje}%
            </div>
        `;

        // Recomendaciones para Usuario 1
        const rec1 = productos
            .map((producto, i) => (usuario1[i] <= 2 && usuario2[i] >= 4) ? {
                producto, puntuacion: usuario2[i],
                motivo: `Usuario 2 lo valora en ${usuario2[i]}/5`
            } : null)
            .filter(Boolean);

        html += `<div class="mt-4"><h5><i class="fas fa-user-plus text-success"></i> Recomendaciones para <strong>Usuario 1</strong></h5>`;
        if (rec1.length === 0) {
            html += `<div class="alert alert-light">No hay productos recomendables para Usuario 1.</div>`;
        } else {
            html += `<div class="border rounded p-3 bg-white shadow-sm">`;
            rec1.forEach(r => {
                html += `<div class="recomendacion-item">
                            <strong>${r.producto}</strong> 
                            <span class="badge bg-success float-end">${r.puntuacion}/5</span>
                            <br>
                            <small class="text-muted"><i class="fas fa-lightbulb"></i> ${r.motivo}</small>
                         </div>`;
            });
            html += `</div>`;
        }
        html += `</div>`;

        // Recomendaciones para Usuario 2
        const rec2 = productos
            .map((producto, i) => (usuario2[i] <= 2 && usuario1[i] >= 4) ? {
                producto, puntuacion: usuario1[i],
                motivo: `Usuario 1 lo valora en ${usuario1[i]}/5`
            } : null)
            .filter(Boolean);

        html += `<div class="mt-4"><h5><i class="fas fa-user-plus text-primary"></i> Recomendaciones para <strong>Usuario 2</strong></h5>`;
        if (rec2.length === 0) {
            html += `<div class="alert alert-light">No hay productos recomendables para Usuario 2.</div>`;
        } else {
            html += `<div class="border rounded p-3 bg-white shadow-sm">`;
            rec2.forEach(r => {
                html += `<div class="recomendacion-item">
                            <strong>${r.producto}</strong> 
                            <span class="badge bg-primary float-end">${r.puntuacion}/5</span>
                            <br>
                            <small class="text-muted"><i class="fas fa-lightbulb"></i> ${r.motivo}</small>
                         </div>`;
            });
            html += `</div>`;
        }
        html += `</div>`;

        document.getElementById("resultado").innerHTML = html;
    });
</script>

</body>
</html>
